<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
    <style>
      #e {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
        left: 0;
        top: 0;
        zoom: 1;
      }
    </style>
  </head>

  <body>
    <div id="e"></div>
    <script>
      // var e = document.getElementById('e')
      // var flag = true
      // var left = 0

      // function render() {
      //   if (flag == true) {
      //     if (left >= 100) {
      //       flag = false
      //     }
      //     e.style.left = ` ${left++}px`
      //   } else {
      //     if (left <= 0) {
      //       flag = true
      //     }
      //     e.style.left = ` ${left--}px`
      //   }
      // }

      // //requestAnimationFrame效果
      // ;(function animloop() {
      //   render()
      //   window.requestAnimationFrame(animloop)
      // })()

      // 调用的是系统的时间间隔
      const element = document.getElementById('e')
      let start

      function step(timestamp) {
        if (start === undefined) start = timestamp
        const elapsed = timestamp - start

        //这里使用`Math.min()`确保元素刚好停在200px的位置。
        element.style.transform =
          'translateX(' + Math.min(0.1 * elapsed, 200) + 'px)'

        if (elapsed < 2000) {
          // 在两秒后停止动画
          window.requestAnimationFrame(step)
        }
      }

      var timer1 = window.requestAnimationFrame(step)

      //取消回调函数
      // cancelAnimationFrame(timer1)
    </script>
  </body>
</html>
