<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // TODO:Function.prototype._bind = function (arg) {
      //   const self = this
      //   // 不能用箭头函数因为获取不到箭头函数里面的arguments
      //   return function () {
      //     self.call(arg, ...arguments)
      //   }
      // }

      // function ma(d, e) {
      //   console.log(this.name)
      //   console.log(d)
      //   console.log(e)
      // }
      // const a = {
      //   name: 2,
      // }

      // ma._bind(a)('dd', 'ccc')
      // ma.bind(a)('dd', 'ccc')
      // Function.prototype.myBind = function () {
      //   var ctx = arguments[0] || window,
      //     self = this,
      //     arrPro = Array.prototype,
      //     args = arrPro.slice.call(arguments, 1)
      //   return function () {
      //     self.apply(ctx, arrPro.concat.call(args))
      //   }
      // }

      // ma.myBind(a, '2', '3')()

      // TODO: apply封装
      // Function.prototype._apply = function (arg, rest) {
      //   const _this = Symbol('linshi')
      //   arg[_this] = this
      //   arg[_this](...rest)
      // }

      // function ma(d, e) {
      //   console.log(this.name)
      //   console.log(d)
      //   console.log(e)
      // }
      // const a = {
      //   name: 2,
      // }
      // ma._apply(a, [1, 2])

      //  TODO: call封装
      // Function.prototype._call = function (arg, ...rest) {
      //   const _this = Symbol('linshi')
      //   arg[_this] = this
      //   arg[_this](...rest)
      // }

      // function ma(d, e) {
      //   console.log(this.name)
      //   console.log(d)
      //   console.log(e)
      // }
      // const a = {
      //   name: 2,
      // }
      // ma._call(a, 1, 2)

      //TODO: Function.prototype.onlyBind = function (arg) {
      //   arg.__fn__ = this
      //   let args = [...arguments].slice(1)
      //   arg.__result__ = function () {
      //     let result_args = [...args, ...arguments]
      //     arg.__fn__(...result_args)
      //   }
      //   return arg.__result__
      // }

      // function ma(d, e) {
      //   console.log(this)
      //   console.log(d)
      //   console.log(e)
      // }
      // const a = {
      //   name: 2,
      // }

      // ma.onlyBind(a)('dd', 'ccc')

      //TODO:
      // Function.prototype.bbind = function (fn, ...rest) {
      //   const self = this
      //   return function () {
      //     self.apply(fn, rest)
      //   }
      // }

      // Function.prototype.onlyBind = function (arg) {
      //   arg.__fn__ = this
      //   let args = [...arguments].slice(1)
      //   arg.__result__ = function () {
      //     let result_args = [...args, ...arguments]
      //     arg.__fn__(...result_args)
      //   }
      //   return arg.__result__
      // }

      Function.prototype.ccall = function (fn, ...rest) {
        const _this = Symbol('this')
        fn[_this] = this
        const result = fn[_this](...rest)
        delete fn[_this]
        return result
      }

      Function.prototype.aapply = function (fn, rest) {
        const _this = Symbol('this')
        fn[_this] = this
        const result = fn[_this](...rest)
        delete fn[_this]
        return result
      }

      function ma(value, value1) {
        console.log(this)
        console.log(value, value1)
      }
      const ma1 = {
        name: 'mamamma',
      }
      // ma.bbind(ma1, 'aaaa')()
      // ma.ccall(ma1, 'aaaa', 'bbbb')
      ma.aapply(ma1, ['aaaa', 'bbbb'])
    </script>
  </body>
</html>
